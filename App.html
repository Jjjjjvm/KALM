<script>
const المتغيرات = {};

function تنفيذ_امر(سطر) {
    const تقسيم = سطر.trim().split(" ");
    if (تقسيم.length === 0) return "";

    const الامر = تقسيم[0];
    // التصحيح هنا: تم تغيير "امر" إلى "الامر"
    if (الامر === "") return "";

    if (الامر === "اطبع") {
        let نص = تقسيم.slice(1).join(" ");
        Object.keys(المتغيرات).forEach((مفتاح) => {
            نص = نص.replaceAll(مفتاح, المتغيرات[مفتاح]);
        });
        return نص;
    } else if (الامر === "جمع") {
        if (تقسيم.length >= 3) {
            let ن1 = isNaN(تقسيم[1]) ? المتغيرات[تقسيم[1]] || 0 : Number(تقسيم[1]);
            let ن2 = isNaN(تقسيم[2]) ? المتغيرات[تقسيم[2]] || 0 : Number(تقسيم[2]);
            return (ن1 + ن2).toString();
        } else {
            return "استخدم: جمع رقم1 رقم2";
        }
    } else if (الامر === "عين") {
        if (تقسيم.length >= 3) {
            const اسم = تقسيم[1];
            const قيمة = isNaN(تقسيم[2]) ? تقسيم[2] : Number(تقسيم[2]);
            المتغيرات[اسم] = قيمة;
            return `تم تعيين ${اسم} = ${قيمة}`;
        } else {
            return "استخدم: عين اسم_المتغير القيمة";
        }
    } else {
        return "أمر غير معروف";
    }
}

function تشغيل() {
    const كود = document.getElementById("code").value;
    const أسطر = كود.split("\n");
    let نتائج = [];

    for (let سطر of أسطر) {
        سطر = سطر.trim();
        if (سطر.length > 0) {
            const نتيجة = تنفيذ_امر(سطر);
            نتائج.push(`>>> ${سطر}\n${نتيجة}`);
        }
    }

    document.getElementById("output").textContent = نتائج.join("\n\n");
}
</script>
